# DPC査定分析アプリ（外来 / 入院DPC / 入院出来高）

## 画面構成
- 外来
  - ① 推移（混合）：棒=査定額、折れ線=査定率（査定額/請求額）
  - ② 内訳（円）：理由カテゴリ 上位5+その他 + 表
  - ③ 注意項目：アラート（🔴🟠🟡）一覧 + ドリルダウン
- 入院
  - DPC（同上）
  - 出来高（同上）

期間は「最新月」「累計（年度累計）」を切替可能。粒度は「全体」「診療科別」。

## デモ
`sample_data/DPC_査定分析_デモデータ_v2.xlsx` をアップロードして動作確認できます。

## 必須列（dataシート）
- 月（例: 2026-01）
- 区分（外来 / 入院）
- 入院種別（DPC / 出来高 / 空白）
- 診療科
- 査定理由カテゴリ
- 注意項目
- 査定額（数値）
- 件数（数値）
- 請求額（数値）

## データの自動保存・反映（ローカルのみ）
- アップロードしたExcelは `data_store/latest.xlsx` に自動保存
- 次回起動時に自動読込されます  
※Streamlit Cloud のスリープ等で保存が消える環境では、必要時に再アップロードしてください。

## 起動
```bash
pip install -r requirements.txt
streamlit run app.py
```